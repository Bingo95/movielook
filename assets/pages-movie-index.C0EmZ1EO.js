import{g as O,r as h,h as B,s as D,j as P,n as A,c as _,d as i,w as e,e as t,k as I,i as $,f as m,t as v,l as C,m as M,F as b,p as x,S as N,q,u as T,b as R,v as H}from"./index-C27CbE57.js";const V="/static/movie/h_local.png",G="/static/movie/h_search.png",U=O("city",()=>{const a=h(null);function s(c){a.value=c}return{currentCity:a,setCity:s}},{persist:{key:"city",paths:["currentCity"],storage:{getItem:P,setItem:D,removeItem:B}}}),X="/static/web",L={city:"/movie/citySelect",search:"/movie/movieSearch",order:"/movie/orderList",movieTheatre:"/movie/movieTheatre",movieTime:"/movie/movieTime"},j=a=>{const{type:s=0,params:c="{}"}=a,n=Number(s);let r={};try{r=z(c)}catch(y){console.error("params解析失败:",y)}const{url:u}=r,w=L[u]?"".concat(X).concat(L[u]):u;if(!w)return;let d=J(w,r);switch(n){case 1:{A({url:d});break}default:{d=Q(d),window.location.href=d;break}}},z=a=>{if(a==null)return{};if(typeof a=="object")return a;if(typeof a=="string"){const s=a.trim();return s?JSON.parse(s):{}}return{}},E=(a={})=>typeof a!="object"||a===null?"":Object.entries(a).filter(([s,c])=>c!=null&&c!=="").map(([s,c])=>"".concat(encodeURIComponent(s),"=").concat(encodeURIComponent(c))).join("&"),J=(a,s={})=>{if(!a)return"";const{url:c,...n}=s,r=E(n);if(!r)return a;const u=a.includes("?")?"&":"?";return"".concat(a).concat(u).concat(r)},Q=a=>{if(!a)return"";const s=Date.now(),c=a.includes("?")?"&":"?";return"".concat(a).concat(c,"t=").concat(s)},S=(a,s)=>{const c=a.__vccOpts||a;for(const[n,r]of s)c[n]=r;return c},W=Object.assign({options:{virtualHost:!0}},{__name:"MoviceItem",props:{data:{type:Object,required:!0}},setup(a){const s=c=>{console.log(c),j({params:{url:"movieTheatre",...c}})};return(c,n)=>{const r=I,u=$;return i(),_(u,{class:"list-item",onClick:n[0]||(n[0]=w=>s(a.data))},{default:e(()=>[t(r,{src:a.data.poster||"",mode:"scaleToFill",class:"poster"},null,8,["src"]),t(u,{class:"content"},{default:e(()=>[t(u,{class:"title"},{default:e(()=>[m(v(a.data.title),1)]),_:1}),t(u,{class:"score-row"},{default:e(()=>[t(u,{class:"score-label"},{default:e(()=>[m("观众评分")]),_:1}),t(u,{class:"score-value"},{default:e(()=>[m(v(a.data.score),1)]),_:1})]),_:1}),t(u,{class:"actors"},{default:e(()=>[m("主演："+v(a.data.actors),1)]),_:1}),t(u,{class:"category"},{default:e(()=>[m("类型："+v(a.data.category),1)]),_:1})]),_:1}),t(u,{class:"btn_primary buy-btn"},{default:e(()=>[m("购票")]),_:1})]),_:1})}}}),Y=S(W,[["__scopeId","data-v-091a1a09"]]),K=Object.assign({options:{virtualHost:!0}},{__name:"NowShowingList",props:{goPage:{type:Function,required:!1}},setup(a){const s=h([{id:1,title:"电影 A",score:"8.6",actors:"黄渤、范丞丞、常远、常远常远常远",category:"动作 / 冒险"},{id:2,title:"电影22",score:"8.6",actors:"黄渤、范丞丞、常远、常远常远常远",category:"动作 / 冒险"},{id:3,title:"电影22",score:"8.6",actors:"黄渤、范丞丞、常远、常远常远常远",category:"动作 / 冒险"},{id:4,title:"电影22",score:"8.6",actors:"黄渤、范丞丞、常远、常远常远常远",category:"动作 / 冒险"},{id:5,title:"电影22",score:"8.6",actors:"黄渤、范丞丞、常远、常远常远常远",category:"动作 / 冒险"}]),c=h(!1),n=h(!1),r=h(!1),u=()=>new Promise(o=>{setTimeout(()=>{const f=[{id:Date.now()+Math.random(),title:"新电影 X",score:"9.2",actors:"新演员A, 新演员B",category:"剧情"}];o(f)},1e3)}),w=()=>new Promise(o=>{setTimeout(()=>{const f=s.value.length;if(f>=13){o([]);return}const l=[{id:Date.now()+Math.random(),title:"加载项 ".concat(f+1),score:"7.8",actors:"新演员1, 新演员2",category:"喜剧"},{id:Date.now()+Math.random()+1,title:"加载项 ".concat(f+2),score:"7.2",actors:"演员A, 演员B",category:"剧情"},{id:Date.now()+Math.random()+2,title:"加载项 ".concat(f+3),score:"8.0",actors:"演员X, 演员Y",category:"动作"}];o(l)},900)}),d=async()=>{if(!c.value){c.value=!0;try{const o=await u();s.value=[...o,...s.value],r.value=!1}catch(o){console.error(o)}finally{setTimeout(()=>c.value=!1,300)}}},y=async()=>{if(!(n.value||r.value)){n.value=!0;try{const o=await w();!o||o.length===0?r.value=!0:s.value=[...s.value,...o]}catch(o){console.error(o)}finally{setTimeout(()=>n.value=!1,300)}}};return(o,f)=>{const l=$,g=N;return i(),_(g,{class:"now-list","scroll-y":"","refresher-enabled":"","enable-back-to-top":"","refresher-triggered":c.value,onRefresherrefresh:d,"lower-threshold":50,"refresher-background":"#f8f8f8",onScrolltolower:y},{default:e(()=>[t(l,{class:"now-list-box"},{default:e(()=>[(i(!0),C(b,null,x(s.value,(k,p)=>(i(),_(Y,{key:k.id,data:k},null,8,["data"]))),128)),n.value?(i(),_(l,{key:0,class:"load-more"},{default:e(()=>[m("加载中...")]),_:1})):r.value?(i(),_(l,{key:1,class:"load-more"},{default:e(()=>[m("没有更多了")]),_:1})):M("",!0)]),_:1})]),_:1},8,["refresher-triggered"])}}}),Z=S(K,[["__scopeId","data-v-ea2e3068"]]),ee=Object.assign({options:{virtualHost:!0}},{__name:"ComingSoonList",setup(a){const s=h([{date:"明天10月24日",items:[{id:201,title:"即将上映：电影 B",score:"敬请期待",actors:"待公布",category:"未知"},{id:202,title:"即将上映：电影 B",score:"敬请期待",actors:"待公布",category:"未知"}]},{date:"明天10月24日",items:[{id:221,title:"即将上映：电影 A",score:"敬请期待",actors:"待公布",category:"未知"}]}]),c=h(!1),n=h(!1),r=h(!1),u=async()=>{if(!c.value){c.value=!0;try{const d=[];s.value=[...d,...s.value],r.value=!1}catch(d){console.error(d)}finally{setTimeout(()=>c.value=!1,300)}}},w=async()=>{if(!(n.value||r.value)){n.value=!0;try{const d=[];!d||d.length===0?r.value=!0:s.value=[...s.value,...d]}catch(d){console.error(d)}finally{setTimeout(()=>n.value=!1,300)}}};return(d,y)=>{const o=$,f=I,l=N;return i(),_(l,{class:"coming-list","scroll-y":"true","refresher-enabled":"","enable-back-to-top":"","refresher-triggered":c.value,onRefresherrefresh:u,"lower-threshold":50,"refresher-background":"#f8f8f8",onScrolltolower:w},{default:e(()=>[(i(!0),C(b,null,x(s.value,(g,k)=>(i(),C(b,{key:k},[t(o,{class:"date-title"},{default:e(()=>[m(v(g.date),1)]),_:2},1024),t(o,{class:"movie-list"},{default:e(()=>[(i(!0),C(b,null,x(g.items,(p,F)=>(i(),_(o,{class:"movie-row",key:p.id},{default:e(()=>[t(f,{class:"poster",src:p.poster||"",mode:"scaleToFill"},null,8,["src"]),t(o,{class:"movie-content"},{default:e(()=>[t(o,{class:"movie-title"},{default:e(()=>[m(v(p.title),1)]),_:2},1024),t(o,{class:"actors"},{default:e(()=>[m("主演："+v(p.actors),1)]),_:2},1024),t(o,{class:"category"},{default:e(()=>[m("类型："+v(p.category),1)]),_:2},1024),t(o,{class:"release"},{default:e(()=>[m(v(p.releaseDate||"2025-10-24")+" 上映",1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)],64))),128)),n.value?(i(),_(o,{key:0,class:"load-more"},{default:e(()=>[m("加载中...")]),_:1})):r.value?(i(),_(o,{key:1,class:"load-more"},{default:e(()=>[m("没有更多了")]),_:1})):M("",!0)]),_:1},8,["refresher-triggered"])}}}),te=S(ee,[["__scopeId","data-v-9327ea36"]]),ae="/static/movie/h_down.png",se="/static/movie/m_check.png",oe=Object.assign({options:{virtualHost:!0}},{__name:"CinemasItem",props:{data:{type:Object,required:!0}},setup(a){const s=c=>{j({params:{url:"movieTime",...c}})};return(c,n)=>{const r=$;return i(),_(r,{class:"cinema-row",onClick:n[0]||(n[0]=u=>s(a.data))},{default:e(()=>[t(r,{class:"cinema-left"},{default:e(()=>[t(r,{class:"cinema-name"},{default:e(()=>[m(v(a.data.name),1)]),_:1}),t(r,{class:"cinema-address"},{default:e(()=>[m(v(a.data.address),1)]),_:1})]),_:1}),t(r,{class:"cinema-distance"},{default:e(()=>[m(v(a.data.distance),1)]),_:1})]),_:1})}}}),ce=S(oe,[["__scopeId","data-v-a48bb882"]]),ne=Object.assign({options:{virtualHost:!0}},{__name:"CinemasList",setup(a){const s=h([{id:1,name:"CGV影城（奥体印象城杜比 4DX店）",address:"萧山盈丰路街道飞虹城4层28号",distance:"423m"},{id:2,name:"万达影城（城东店）",address:"城东路200号万达广场B座3层",distance:"1.2km"},{id:3,name:"百老汇国际影城（中心店）",address:"中心大街88号时代广场5层",distance:"2.3km"},{id:4,name:"百老汇国际影城（中心店）",address:"中心大街88号时代广场5层",distance:"2.3km"},{id:5,name:"百老汇国际影城（中心店）",address:"中心大街88号时代广场5层",distance:"2.3km"}]),c=h([{id:0,name:"所有区域"},{id:1,name:"萧山区"},{id:2,name:"上城区"},{id:3,name:"下城区"},{id:7,name:"余杭区"},{id:8,name:"西湖区"}]),n=h(!1),r=h(0),u=q(()=>{const o=c.value.find(f=>f.id===r.value);return o?o.name:"区域"}),w=()=>{n.value=!n.value},d=()=>{n.value=!1},y=(o,f)=>{r.value=o.id,n.value=!1};return(o,f)=>{const l=$,g=I,k=N;return i(),_(l,{class:"cinemas-page"},{default:e(()=>[t(l,{class:"top-area"},{default:e(()=>[t(l,{class:"area-btn",onClick:w},{default:e(()=>[t(l,{class:"area-text"},{default:e(()=>[m(v(u.value),1)]),_:1}),t(g,{class:T(["area-down",{open:n.value}]),src:ae,mode:"widthFix"},null,8,["class"])]),_:1})]),_:1}),t(l,{class:T(["mask",{open:n.value}]),onClick:d},null,8,["class"]),t(l,{class:T(["area-panel",{open:n.value}])},{default:e(()=>[t(k,{class:"area-list","scroll-y":"true"},{default:e(()=>[(i(!0),C(b,null,x(c.value,(p,F)=>(i(),_(l,{class:"area-item",key:p.id,onClick:ie=>y(p,F)},{default:e(()=>[r.value===p.id?(i(),_(g,{key:0,class:"area-check",src:se,mode:"widthFix"})):(i(),_(l,{key:1,class:"area-check-placeholder"})),t(l,{class:"area-name"},{default:e(()=>[m(v(p.name),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1},8,["class"]),t(k,{class:"cinema-list","enable-back-to-top":"","scroll-y":"true"},{default:e(()=>[(i(!0),C(b,null,x(s.value,p=>(i(),_(ce,{class:"cinema-row",key:p.id,data:p},null,8,["data"]))),128))]),_:1})]),_:1})}}}),re=S(ne,[["__scopeId","data-v-28c1ce96"]]),le={__name:"index",setup(a){const s=h(0),c=h("北京"),n=U();R(()=>{n.currentCity&&(c.value=n.currentCity.name||n.currentCity)}),H(()=>n.currentCity,y=>{y&&(c.value=y.name||y)});const r=["正在热映","即将上映","影院"],u=[{text:"取票码",icon:"/static/movie/h_qr.png",click:()=>{}},{text:"订单",icon:"/static/movie/h_order.png",click:()=>d("order")},{text:"客服",icon:"/static/movie/h_customer.png",click:()=>{}},{text:"我的",icon:"/static/movie/h_user.png",click:()=>{}}],w=y=>{s.value=y},d=(y,o={})=>{j({params:{url:y,...o}})};return(y,o)=>{const f=I,l=$;return i(),_(l,{class:"movieticket-page"},{default:e(()=>[t(l,{class:"top-menu"},{default:e(()=>[t(l,{class:"menu-buttons"},{default:e(()=>[(i(),C(b,null,x(u,(g,k)=>t(l,{key:k,class:"menu-item",onClick:g.click},{default:e(()=>[t(f,{class:"menu-icon",src:g.icon,mode:"widthFix"},null,8,["src"]),t(l,{class:"menu-text"},{default:e(()=>[m(v(g.text),1)]),_:2},1024)]),_:2},1032,["onClick"])),64))]),_:1})]),_:1}),t(l,{class:"middle"},{default:e(()=>[t(l,{class:"city-wrap",onClick:o[0]||(o[0]=g=>d("city"))},{default:e(()=>[t(f,{src:V,class:"city-icon",mode:"widthFix"}),t(l,{class:"city"},{default:e(()=>[m(v(c.value),1)]),_:1})]),_:1}),t(l,{class:"nav-center"},{default:e(()=>[(i(),C(b,null,x(r,(g,k)=>t(l,{key:k,class:T(["nav-item",{selected:s.value===k}]),onClick:p=>w(k)},{default:e(()=>[m(v(g),1)]),_:2},1032,["class","onClick"])),64))]),_:1}),t(l,{class:"search-wrap",onClick:o[1]||(o[1]=g=>d("search"))},{default:e(()=>[t(f,{src:G,class:"search-btn",mode:"widthFix"})]),_:1})]),_:1}),s.value===0?(i(),_(Z,{key:0})):s.value===1?(i(),_(te,{key:1})):s.value===2?(i(),_(re,{key:2})):M("",!0)]),_:1})}}},de=S(le,[["__scopeId","data-v-fe0ccfb5"]]);export{de as default};
