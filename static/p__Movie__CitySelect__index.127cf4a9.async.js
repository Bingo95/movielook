"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[966],{62775:function(Y,A,i){i.r(A),i.d(A,{default:function(){return U}});var F=i(335),I=i.n(F),w=i(48305),B=i.n(w),j=i(96237),E=i(72197),T=i(25230),b=i(17069),G=i.n(b),R=i(25298),D=i.n(R),H={groupGoodsInfo:{miniProgram:{path:"/pages/community/goodInfo/index"}}},J={miniProgram:{navigateTo:"navigateTo",redirectTo:"redirectTo",goBack:"navigateBack",goTab:"switchTab",reLaunch:"reLaunch",postMessage:"postMessage"}},K=G()(function S(){var M=this;D()(this,S),this.queryParams=function(e){if(!e)return"";var r=[];for(var c in e){var s=e[c];["",void 0,null].includes(s)||(Array.isArray(s)&&(s=s.toString()),r.push(c+"="+s))}return console.log(r.length?"?"+r.join("&"):""),r.length?"?"+r.join("&"):""},this.urlGet=function(e,r){return e+M.queryParams(r)},this.getPhone=function(){var e=navigator.userAgent.toLowerCase();return/micromessenger/.test(e)&&/miniprogram/.test(e)?"miniProgram":/miniProgram/i.test(e)?"wechat":"normal"},this.checkAppParams=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=this.getPhone(),c=e.params,s=c===void 0?{}:c,d=e.path,v=H[d],l="",g=s;if(v){var x=v[r],k=x.path,f=x.key;l=k,f&&Object.keys(f).forEach(function(p){g[f[p]]=s[p]})}return{path:l,params:g}},this.nativeInit=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=this.getPhone();if(console.log(c,"env"),!!c){var s=this.checkAppParams(r);if(c==="wechat"||c==="normal"){if(e==="postMessage"){localStorage.setItem("m_city",{});return}if(e==="goBack"){window.history.back();return}}else if(c==="miniProgram"){var d=s.params,v=s.path,l=J.miniProgram[e];if(l==="postMessage"){wx.miniProgram[l]({data:r});return}wx.miniProgram[l]({url:this.urlGet(v,d)})}}}}),O=new K,o={city_page:"city_page___FTpYq",current_block:"current_block___sKoTR",current_label:"current_label___gJg4e",current_row:"current_row___eCxRL",local_icon:"local_icon___k9iGl",current_city:"current_city____JCnN",hot_and_list:"hot_and_list___n0CxT",hot_title:"hot_title___Ivkj9",hot_tags:"hot_tags___IIBks",tag:"tag___XF6wa",city_groups:"city_groups___mhHP4",group_items:"group_items___lc7RX",city_row:"city_row___rCRAy"},n=i(48502),L=function(){var M=(0,E.useModel)("useCities"),e=M.data,r=e===void 0?[]:e,c=(0,j.useState)("\u5B9A\u4F4D\u4E2D"),s=B()(c,2),d=s[0],v=s[1],l=["\u5317\u4EAC","\u4E0A\u6D77","\u5E7F\u5DDE","\u6DF1\u5733","\u676D\u5DDE","\u5357\u4EAC"],g=(0,j.useMemo)(function(){var t={},a=I()(r),u;try{for(a.s();!(u=a.n()).done;){var _=u.value,h=((_.pinyin_prefix||"").charAt(0)||"").toUpperCase();h&&(t[h]||(t[h]=[])).push(_)}}catch(m){a.e(m)}finally{a.f()}var y=Object.keys(t).sort(),C=I()(y),P;try{for(C.s();!(P=C.n()).done;){var N=P.value;t[N].sort(function(m,X){return m.name.localeCompare(X.name)})}}catch(m){C.e(m)}finally{C.f()}return{letters:y,groups:t}},[r]),x=g.letters,k=g.groups;(0,j.useEffect)(function(){if(!(!r||r.length===0)){var t=r.find(function(a){return a.name&&a.name.includes("\u676D\u5DDE")});v(t?t.name:r[0].name)}},[r]);var f=(0,j.useMemo)(function(){for(var t=[],a=function(){var P=_[u],N=r.find(function(m){return m.name&&m.name.includes(P)});N&&t.push(N)},u=0,_=l;u<_.length;u++)a();for(var h=0;t.length<6&&h<r.length;){var y=r[h++];t.includes(y)||t.push(y)}return t.slice(0,6)},[r]),p=function(a){O.nativeInit("postMessage",{type:"city",data:{a:1}}),O.nativeInit("goBack")};return(0,n.jsxs)("div",{className:o.city_page,children:[(0,n.jsxs)("div",{className:o.current_block,children:[(0,n.jsx)("div",{className:o.current_label,children:"\u5F53\u524D\u5B9A\u4F4D"}),(0,n.jsxs)("div",{className:o.current_row,children:[(0,n.jsx)("img",{className:o.local_icon,src:"/movie/h_local.png",alt:"local"}),(0,n.jsx)("div",{className:o.current_city,children:d})]})]}),(0,n.jsxs)("div",{className:o.hot_and_list,children:[(0,n.jsx)("div",{className:o.hot_title,children:"\u70ED\u95E8\u57CE\u5E02"}),(0,n.jsx)("div",{className:o.hot_tags,children:f.map(function(t,a){return(0,n.jsx)("div",{className:o.tag,onClick:function(){return p(t)},children:t.name},t.name+a)})})]}),(0,n.jsx)("div",{className:o.city_groups,children:(0,n.jsx)(T._8,{children:x.map(function(t){return(0,n.jsx)(T._8.Panel,{index:t,children:(0,n.jsx)("div",{className:o.group_items,children:(k[t]||[]).map(function(a){return(0,n.jsx)("div",{className:o.city_row,onClick:function(){return p(a)},children:a.name},a.name+a.id)})})},t)})})})]})},U=L}}]);
