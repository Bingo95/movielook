import{r as l,x as _,y as d,a as v,c as u,j as m,z as g,d as r,i as p,s as k}from"./index-BIk9QEG5.js";const f={__name:"index",setup(b){const s=l(""),t=l(""),i=e=>{const a=e.detail.data[0];console.log("接收H5消息：",a);const{type:o,data:n}=a;switch(o){case"city":console.log("城市选择消息，参数：",n),k("m_city",n);break;default:console.log("web-view消息类型：",o)}},c=e=>{if(!e)return"";const a=e.includes("?")?"&":"?",o=m("token")||"",n=[];return o&&n.push("bbcToken=".concat(encodeURIComponent(o))),n.push("t=".concat(Date.now())),"".concat(e).concat(a).concat(n.join("&"))};return _(e=>{t.value=decodeURIComponent((e==null?void 0:e.url)||""),s.value=c(t.value)}),d(()=>{setTimeout(()=>{s.value=""},1e3)}),v(()=>{t.value&&(s.value=c(t.value))}),(e,a)=>{const o=g,n=p;return s.value!==""?(r(),u(o,{key:0,src:s.value,onMessage:i},null,8,["src"])):(r(),u(n,{key:1}))}}};export{f as default};
